var Utils;Utils=class{constructor(e,t,s,i){this._fs=e,this._path=t,this._ncp=s,this.logger=i}mkdirSync(e){var t;this.logger.debug("Making dir: "+e);try{return this._fs.mkdirSync(e)}catch(e){if("EEXIST"!==(t=e).code)throw t}}isFile(e,t=""){var s,i;return s=this._path.resolve(t,e),this._fs.existsSync(s)&&(i=this._fs.statSync(s))&&i.isFile()}isDir(e,t=""){var s,i;return s=this._path.resolve(t,e),this._fs.existsSync(s)&&(i=this._fs.statSync(s))&&i.isDirectory()}readDirRecursive(e,t=!0){var s,i,r,a,h,n;if(r=[],this.isFile(e))return[e];for(a=0,h=(n=this._fs.readdirSync(e)).length;a<h;a++)s=n[a],i=this._path.join(e,s),this.isFile(i)?r.push(i):(t||r.push(i),r.push(...this.readDirRecursive(i,t)));return r}sanitizeFilename(e){return e.replace(/[\s<>()\[\]{}:;'`"\/\\|?\*~!@#$%^&,]/g,"_").replace(/__+/g,"_")}getBasename(e,t){return this._path.basename(e,t)}getDirname(e){return this._path.dirname(e)}readFile(e){return this._fs.readFileSync(e,"utf8")}getLinkToNewPageFile(e,t,s){var i,r,a,h,n,l,c,p,u;if((r=this.getBasename(e)).endsWith(".html")){for(i=r.replace(".html",""),a=0,n=t.length;a<n;a++)if(i===(p=t[a]).fileBaseName)return s===p.space?p.fileNameNew.replace(".md",""):p.spacePath.replace(".md","")}else{if(!(c=e.match(/.*pageId=(\d+).*/)))return;for(u=c[1],h=0,l=t.length;h<l;h++)if(u===(p=t[h]).fileBaseName)return p.spacePath.replace(".md","")}}copyAssets(e,t){var s,i,r,a,h,n,l;for(l=[],a=0,h=(n=["images","attachments"]).length;a<h;a++)s=n[a],i=this._path.join(e,s),r=this._path.join(t,s),this.isDir(i)?l.push(this._ncp(i,r)):l.push(void 0);return l}},module.exports=Utils;