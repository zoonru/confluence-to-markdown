var Formatter;Formatter=class{constructor(e,t,r){this._cheerio=e,this.utils=t,this.logger=r}load(e){return this._cheerio.load(e)}getText(e){return e.text()}getHtml(e){var t,r;return t=this._cheerio,r="",e.each((e,n)=>r+=t(n).html()),r}getRightContentByFileName(e,t){var r;return"index.html"===t?e.find("#content").find("#main-content>.confluenceTable").remove().end():(r=["#main-content",".pageSection.group:has(.pageSectionHeader>#attachments)",".pageSection.group:has(.pageSectionHeader>#comments)"],e.find(r.join(", ")))}fixHeadline(e){return this._removeElementLeaveText(e,"span.aui-icon")}addPageHeading(e,t){var r;return r=(0,this._cheerio)("<h1>").text(t),e.first().prepend(r),e}fixIcon(e){return this._removeElementLeaveText(e,"span.aui-icon")}fixEmptyLink(e){var t;return t=this._cheerio,e.find("a").each((e,r)=>{if(0===t(r).text().trim().length&&0===t(r).find("img").length)return t(r).remove()}).end()}fixEmptyHeading(e){var t;return t=this._cheerio,e.find(":header").each((e,r)=>{if(0===t(r).text().trim().length)return t(r).remove()}).end()}fixPreformattedText(e){var t;return t=this._cheerio,e.find("pre").each((e,r)=>{var n,i,a;if(i=t(r).data("syntaxhighlighterParams"),t(r).attr("style",i),n=null!=(a=t(r).css())?a.brush:void 0,t(r).removeAttr("class"),n)return t(r).addClass(n)}).end()}fixImageWithinSpan(e){var t;return t=this._cheerio,e.find("span:has(img)").each((e,r)=>{if(0===t(r).text().trim().length)return t(r).replaceWith(t(r).html())}).end()}removeArbitraryElements(e){return this._removeElementLeaveText(e,"span, .user-mention")}fixArbitraryClasses(e){return e.find("*").removeClass((function(e,t){return(t.match(/(^|\s)(confluence\-\S+|external-link|uri|tablesorter-header-inner|odd|even|header)/g)||[]).join(" ")})).end()}fixAttachmentWraper(e){return e.find(".attachment-buttons").remove().end().find(".plugin_attachments_upload_container").remove().end().find("table.attachments.aui").remove().end()}fixPageLog(e){return e.find('[id$="Recentspaceactivity"], [id$=Spacecontributors]').parent().remove().end().end()}fixLocalLinks(e,t,r){var n;return n=this._cheerio,e.find("a").each((e,i)=>{var a,o,h;return void 0===(a=n(i).attr("href"))?(h=n(i).text(),n(i).replaceWith(h),this.logger.debug('No href for link with text "#{text}"')):n(i).hasClass("createlink")?n(i).replaceWith(n(i).text()):(o=this.utils.getLinkToNewPageFile(a,r,t))?n(i).attr("href",o):void 0}).end()}createListFromArray(e){var t,r,n,i,a,o,h;for(i=(t=this._cheerio.load("<ul>"))("ul"),o=0,h=e.length;o<h;o++)a=e[o],r=t("<a>").attr("href",a).text(a.replace("/index","")),(n=t("<li>")).append(r),i.append(n);return i.end()}_removeElementLeaveText(e,t){var r;return r=this._cheerio,e.find(t).each((e,t)=>r(t).replaceWith(r(t).text())).end()}},module.exports=Formatter;